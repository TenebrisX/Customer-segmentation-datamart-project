# 1.3. Качество данных

## Оцените, насколько качественные данные хранятся в источнике.
Опишите, как вы проверяли исходные данные и какие выводы сделали.

- Проверка целостности данных: проверка на наличие дубликатов, значений вне допустимого диапазона, логических ошибок.
- Анализ пропусков данных: определение количества и причин пропусков данных.
- Анализ аномальных значений: выявление значений, которые выходят за рамки ожидаемых значений.

Проверка целостности данных:

Отсутствующие значения: В таблице заказов нету отсутствующих значений в столбцах order_ts, 
order_id, payment, user_id и status.

Дубликаты: В таблице заказов не обнаружено дубликатов order_id.


Анализ диапазона данных и распределения значений:

Идентификаторы заказов: Значения order_id находятся в допустимом диапазоне без
отрицательных значений.

Временные метки заказов: Значения order_ts охватывают примерно один месяц, 
с 12 февраля 2022 года по 14 марта 2022 года.

Идентификаторы пользователей: Значения user_id включают пользователя с идентификатором 0.
Дальнейшее расследование показало, что этот пользователь является действительным,
с средним количеством заказов, сравнимым с другими пользователями, 
и в общей сложности 13 заказов с идентификатором пользователя 0.

Суммы платежей: Суммы платежей варьируются от 60 до 6360, что соответствует
минимальным и максимальным ценам на продукты.

Статусы заказов: Значения статуса соответствуют допустимому диапазону от 1 до 5 без ошибок
выхода за пределы диапазона.

Дополнительные наблюдения и рекомендации:

Распределение статусов заказов: Примерно половина заказов имеют статус "Закрыто".

Пользователи с заказами со статусом "Закрыто": У 988 пользователей есть заказы 
со статусом "Закрыто".

Несоответствия в таблице пользователей: В таблице пользователей, похоже, 
есть несоответствия в столбцах login и name. Поскольку эта таблица напрямую не связана 
с текущей задачей, она не будет рассматриваться в настоящее время. Внедрение процесса валидации 
данных может предотвратить ввод недопустимых данных в будущем.

В целом таблица заказов демонстрирует хорошую целостность данных и попадает в ожидаемые
диапазоны значений. Наблюдаемые закономерности и распределения соответствуют разумным 
бизнес-сценариям.

## Укажите, какие инструменты обеспечивают качество данных в источнике.
Ответ запишите в формате таблицы со следующими столбцами:
- `Наименование таблицы` - наименование таблицы, объект которой рассматриваете.
- `Объект` - Здесь укажите название объекта в таблице, на который применён инструмент. Например, здесь стоит перечислить поля таблицы, индексы и т.д.
- `Инструмент` - тип инструмента: первичный ключ, ограничение или что-то ещё.
- `Для чего используется` - здесь в свободной форме опишите, что инструмент делает.

+---------------------------+------------------------------------------------------------------------------------------------------------------------+----------------+-----------------------------------------------------------------------------+
| Таблицы                   | Объект                                                                                                                 | Инструмент     | Для чего используется                                                       |
+---------------------------+------------------------------------------------------------------------------------------------------------------------+----------------+-----------------------------------------------------------------------------+
| production.orderitems     | id int4 NOT NULL PRIMARY KEY                                                                                           | Первичный ключ | Обеспечивает уникальность записей о товарах в заказе                        |
|                           +------------------------------------------------------------------------------------------------------------------------+----------------+-----------------------------------------------------------------------------+
|                           | order_id int4 NOT NULL                                                                                                 | Индекс         | Ускоряет поиск записей о товарах в заказе по номеру заказа                  |
|                           +------------------------------------------------------------------------------------------------------------------------+----------------+-----------------------------------------------------------------------------+
|                           | product_id int4 NOT NULL                                                                                               | Индекс         | Ускоряет поиск записей о товарах в заказе по коду товара                    |
|                           +------------------------------------------------------------------------------------------------------------------------+----------------+-----------------------------------------------------------------------------+
|                           | discount numeric(19, 5) NOT NULL DEFAULT 0                                                                             | Ограничение    | Ограничивает значение скидки от 0 до цены товара                            |
|                           +------------------------------------------------------------------------------------------------------------------------+----------------+-----------------------------------------------------------------------------+
|                           | price numeric(19, 5) NOT NULL DEFAULT 0                                                                                | Ограничение    | Ограничивает значение цены товара от 0                                      |
|                           +------------------------------------------------------------------------------------------------------------------------+----------------+-----------------------------------------------------------------------------+
|                           | quantity int4 NOT NULL                                                                                                 | Ограничение    | Ограничивает количество товара в заказе от 1                                |
+---------------------------+------------------------------------------------------------------------------------------------------------------------+----------------+-----------------------------------------------------------------------------+
| production.orders         | order_id int4 NOT NULL PRIMARY KEY                                                                                     | Первичный ключ | Обеспечивает уникальность записей о заказах                                 |
|                           +------------------------------------------------------------------------------------------------------------------------+----------------+-----------------------------------------------------------------------------+
|                           | order_ts timestamp NOT NULL                                                                                            | Ограничение    | Ограничивает значение даты заказа на не более текущей даты                  |
|                           +------------------------------------------------------------------------------------------------------------------------+----------------+-----------------------------------------------------------------------------+
|                           | user_id int4 NOT NULL                                                                                                  | Индекс         | Ускоряет поиск записей о заказах по коду пользователя                       |
|                           +------------------------------------------------------------------------------------------------------------------------+----------------+-----------------------------------------------------------------------------+
|                           | bonus_payment numeric(19, 5) NOT NULL DEFAULT 0                                                                        | Ограничение    | Ограничивает значение бонусного платежа от 0                                |
|                           +------------------------------------------------------------------------------------------------------------------------+----------------+-----------------------------------------------------------------------------+
|                           | payment numeric(19, 5) NOT NULL DEFAULT 0                                                                              | Ограничение    | Ограничивает значение платежа от 0                                          |
|                           +------------------------------------------------------------------------------------------------------------------------+----------------+-----------------------------------------------------------------------------+
|                           | "cost" numeric(19, 5) NOT NULL DEFAULT 0                                                                               | Ограничение    | Ограничивает значение стоимости заказа на сумму платежа + бонусного платежа |
|                           +------------------------------------------------------------------------------------------------------------------------+----------------+-----------------------------------------------------------------------------+
|                           | bonus_grant numeric(19, 5) NOT NULL DEFAULT 0                                                                          | Ограничение    | Ограничивает значение бонусного начисления от 0                             |
|                           +------------------------------------------------------------------------------------------------------------------------+----------------+-----------------------------------------------------------------------------+
|                           | status int4 NOT NULL                                                                                                   | Индекс         | Ускоряет поиск записей о заказах по статусу                                 |
+---------------------------+------------------------------------------------------------------------------------------------------------------------+----------------+-----------------------------------------------------------------------------+
| production.orderstatuses  | id int4 NOT NULL PRIMARY KEY                                                                                           | Первичный ключ | Обеспечивает уникальность записей о статусах заказов                        |
+---------------------------+------------------------------------------------------------------------------------------------------------------------+----------------+-----------------------------------------------------------------------------+
| production.orderstatuslog | id int4 NOT NULL GENERATED ALWAYS AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 START 1 CACHE 1 NO CYCLE) | Первичный ключ | Обеспечивает уникальность записей о журналах статусов заказов               |
|                           +------------------------------------------------------------------------------------------------------------------------+----------------+-----------------------------------------------------------------------------+
|                           | order_id int4 NOT NULL                                                                                                 | Индекс         | Ускоряет поиск записей о журналах статусов заказов по номеру заказа         |
|                           +------------------------------------------------------------------------------------------------------------------------+----------------+-----------------------------------------------------------------------------+
|                           | status_id int4 NOT NULL                                                                                                | Индекс         | Ускоряет поиск записей о журналах статусов заказов по коду статуса          |
+---------------------------+------------------------------------------------------------------------------------------------------------------------+----------------+-----------------------------------------------------------------------------+
| production.products       | id int4 NOT NULL PRIMARY KEY                                                                                           | Первичный ключ | Обеспечивает уникальность записей о товарах                                 |
|                           +------------------------------------------------------------------------------------------------------------------------+----------------+-----------------------------------------------------------------------------+
|                           | "name" varchar(2048) NOT NULL                                                                                          | Индекс         | Ускоряет поиск записей о товарах по названию                                |
|                           +------------------------------------------------------------------------------------------------------------------------+----------------+-----------------------------------------------------------------------------+
|                           | price numeric(19, 5) NOT NULL DEFAULT 0                                                                                | Ограничение    | Ограничивает значение цены товара от 0                                      |
+---------------------------+------------------------------------------------------------------------------------------------------------------------+----------------+-----------------------------------------------------------------------------+
| production.users          | id int4 NOT NULL PRIMARY KEY                                                                                           | Первичный ключ | Обеспечивает уникальность записей о пользователях                           |
|                           +------------------------------------------------------------------------------------------------------------------------+----------------+-----------------------------------------------------------------------------+
|                           | "name" varchar(2048) NULL                                                                                              | Индекс         | Ускоряет поиск записей о пользователях по имени                             |
|                           +------------------------------------------------------------------------------------------------------------------------+----------------+-----------------------------------------------------------------------------+
|                           | login varchar(2048) NOT NULL                                                                                           | Индекс         | Ускоряет поиск записей о пользователях по логину                            |
+---------------------------+------------------------------------------------------------------------------------------------------------------------+----------------+-----------------------------------------------------------------------------+