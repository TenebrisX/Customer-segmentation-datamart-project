# 1.3. Качество данных
---

## Оцените, насколько качественные данные хранятся в источнике.
Опишите, как вы проверяли исходные данные и какие выводы сделали.

- Проверка целостности данных: проверка на наличие дубликатов, значений вне допустимого диапазона, логических ошибок.
- Анализ пропусков данных: определение количества и причин пропусков данных.
- Анализ аномальных значений: выявление значений, которые выходят за рамки ожидаемых значений.

### Проверка целостности данных:

Отсутствующие значения: В таблице заказов нету отсутствующих значений в столбцах ```order_ts```, 
```order_id```, ```payment```, ```user_id``` и ```status```.

Дубликаты: В таблице заказов не обнаружено дубликатов ```order_id```.


### Анализ диапазона данных и распределения значений:

- Идентификаторы заказов: Значения ```order_id``` находятся в допустимом диапазоне без
отрицательных значений.
- Временные метки заказов: Значения ```order_ts``` охватывают примерно один месяц, 
с 12 февраля 2022 года по 14 марта 2022 года.
- Идентификаторы пользователей: Значения ```user_id``` включают пользователя с идентификатором 0.
Дальнейшее расследование показало, что этот пользователь является действительным,
с средним количеством заказов, сравнимым с другими пользователями, 
и в общей сложности 13 заказов с идентификатором пользователя = 0.
- Суммы платежей: Суммы платежей варьируются от 60 до 6360, что соответствует минимальным и максимальным ценам на продукты.
- Статусы заказов: Значения статуса соответствуют допустимому диапазону от 1 до 5 без ошибок выхода за пределы диапазона.
- 
### Дополнительные наблюдения и рекомендации:
- Распределение статусов заказов: Примерно половина заказов имеют статус ```"Закрыто"```.
- Пользователи с заказами со статусом "Закрыто": У 988 пользователей есть заказы 
со статусом ```"Закрыто"```.
- Несоответствия в таблице пользователей: В таблице пользователей, похоже, 
есть несоответствия в столбцах ```login``` и ```name```. Поскольку эта таблица напрямую не связана 
с текущей задачей, она не будет рассматриваться в настоящее время. Внедрение процесса валидации 
данных может предотвратить ввод недопустимых данных в будущем.

В целом таблица заказов демонстрирует хорошую целостность данных и попадает в ожидаемые
диапазоны значений. Наблюдаемые закономерности и распределения соответствуют разумным 
бизнес-сценариям.


## Укажите, какие инструменты обеспечивают качество данных в источнике.
Ответ запишите в формате таблицы со следующими столбцами:
- `Наименование таблицы` - наименование таблицы, объект которой рассматриваете.
- `Объект` - Здесь укажите название объекта в таблице, на который применён инструмент. Например, здесь стоит перечислить поля таблицы, индексы и т.д.
- `Инструмент` - тип инструмента: первичный ключ, ограничение или что-то ещё.
- `Для чего используется` - здесь в свободной форме опишите, что инструмент делает.

| **Таблицы**               | **Объект**                                                                                                             | **Инструмент**   | **Для чего используется**                                                   |
|---------------------------|------------------------------------------------------------------------------------------------------------------------|------------------|-----------------------------------------------------------------------------|
| production.orderitems     | id int4 NOT NULL PRIMARY KEY                                                                                           | _Первичный ключ_ | Обеспечивает уникальность записей о товарах в заказе                        |
| production.orderitems     | order_id int4 NOT NULL                                                                                                 | _Индекс_         | Ускоряет поиск записей о товарах в заказе по номеру заказа                  |
| production.orderitems     | product_id int4 NOT NULL                                                                                               | _Индекс_         | Ускоряет поиск записей о товарах в заказе по коду товара                    |
| production.orderitems     | discount numeric(19, 5) NOT NULL DEFAULT 0                                                                             | _Ограничение_    | Ограничивает значение скидки от 0 до цены товара                            |
| production.orderitems     | price numeric(19, 5) NOT NULL DEFAULT 0                                                                                | _Ограничение_    | Ограничивает значение цены товара от 0                                      |
| production.orderitems     | quantity int4 NOT NULL                                                                                                 | _Ограничение_    | Ограничивает количество товара в заказе от 1                                |
| production.orders         | order_id int4 NOT NULL PRIMARY KEY                                                                                     | _Первичный ключ_ | Обеспечивает уникальность записей о заказах                                 |
| production.orders         | order_ts timestamp NOT NULL                                                                                            | _Ограничение_    | Ограничивает значение даты заказа на не более текущей даты                  |
| production.orders         | user_id int4 NOT NULL                                                                                                  | _Индекс_         | Ускоряет поиск записей о заказах по коду пользователя                       |
| production.orders         | bonus_payment numeric(19, 5) NOT NULL DEFAULT 0                                                                        | _Ограничение_    | Ограничивает значение бонусного платежа от 0                                |
| production.orders         | payment numeric(19, 5) NOT NULL DEFAULT 0                                                                              | _Ограничение_    | Ограничивает значение платежа от 0                                          |
| production.orders         | "cost" numeric(19, 5) NOT NULL DEFAULT 0                                                                               | _Ограничение_    | Ограничивает значение стоимости заказа на сумму платежа + бонусного платежа |
| production.orders         | bonus_grant numeric(19, 5) NOT NULL DEFAULT 0                                                                          | _Ограничение_    | Ограничивает значение бонусного начисления от 0                             |
| production.orders         | status int4 NOT NULL                                                                                                   | _Индекс_         | Ускоряет поиск записей о заказах по статусу                                 |
| production.orderstatuses  | id int4 NOT NULL PRIMARY KEY                                                                                           | _Первичный ключ_ | Обеспечивает уникальность записей о статусах заказов                        |
| production.orderstatuslog | id int4 NOT NULL GENERATED ALWAYS AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 START 1 CACHE 1 NO CYCLE) | _Первичный ключ_ | Обеспечивает уникальность записей о журналах статусов заказов               |
| production.orderstatuslog | order_id int4 NOT NULL                                                                                                 | _Индекс_         | Ускоряет поиск записей о журналах статусов заказов по номеру заказа         |
| production.orderstatuslog | status_id int4 NOT NULL                                                                                                | _Индекс_         | Ускоряет поиск записей о журналах статусов заказов по коду статуса          |
| production.products       | id int4 NOT NULL PRIMARY KEY                                                                                           | _Первичный ключ_ | Обеспечивает уникальность записей о товарах                                 |
| production.products       | "name" varchar(2048) NOT NULL                                                                                          | _Индекс_         | Ускоряет поиск записей о товарах по названию                                |
| production.products       | price numeric(19, 5) NOT NULL DEFAULT 0                                                                                | _Ограничение_    | Ограничивает значение цены товара от 0                                      |
| production.users          | id int4 NOT NULL PRIMARY KEY                                                                                           | _Первичный ключ_ | Обеспечивает уникальность записей о пользователях                           |
| production.users          | "name" varchar(2048) NULL                                                                                              | _Индекс_         | Ускоряет поиск записей о пользователях по имени                             |
| production.users          | login varchar(2048) NOT NULL                                                                                           | _Индекс_         | Ускоряет поиск записей о пользователях по логину                            |
